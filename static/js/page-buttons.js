/**
 * 2014 - 2023 Watt Is It
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the MIT License X11
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/mit-license.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to contact@paygreen.fr so we can send you a copy immediately.
 *
 * @author    PayGreen <contact@paygreen.fr>
 * @copyright 2014 - 2023 Watt Is It
 * @license   https://opensource.org/licenses/mit-license.php MIT License X11
 * @version   4.10.2
 *
 */
!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../",n(n.s="5JPJ")}({"5JPJ":function(e,t,n){"use strict";n.r(t);var a=n("FH8G"),i="pg_field_picture_image",r='[name="payment_type"]',l='[name="payment_mode"]',o={AMEX:["CASH"],ANCV:["CASH"],ECV:["CASH"],RESTOFLASH:["CASH"],LUNCHR:["CASH"],CBTRD:["CASH"],TRD:["CASH"],SEPA:["CASH"]};e={install:function(){a.a.pgAddBehaviourOnRadio(l,this.pgManageButtonFields.bind(this)),a.a.pgAddBehaviourOnSelect(r,this.pgVerifPaymentModeCompatibility.bind(this)),this.useDefaultButtonImage(),this.buttonPreview(),this.handlePaymentTypeChange(),this.alertXtimePaymentLegality()},pgVerifPaymentModeCompatibility:function(e){var t=document.querySelectorAll(l);if(this.pgVerifPaymentTypeText(e),Array.isArray(o[e])){var n=a.a.pgGetRadioValue(l);if(!o[e].includes(n)){var i=o[e][0];a.a.pgSetRadioValue(l,i),this.pgManageButtonFields(i)}t.forEach((function(e){a.a.pgDisableElement(e.parentElement)})),o[e].forEach((function(e){a.a.pgEnableElement(document.getElementById("pg_block_payment_mode-"+e).parentElement)}))}else t.forEach((function(e){a.a.pgEnableElement(e.parentElement)}))},pgManageButtonFields:function(e){var t=document.getElementsByClassName("js-hidden-field-togglable");Array.prototype.forEach.call(t,(function(e){a.a.pgDisableElement(e)}));var n=document.querySelectorAll(r);switch(n&&n[0]&&this.pgVerifPaymentModeCompatibility(n[0].value),e){case"RECURRING":a.a.pgEnableElement(document.getElementById("pg_block_payment_number")),a.a.pgEnableElement(document.getElementById("pg_block_payment_report"));break;case"XTIME":a.a.pgEnableElement(document.getElementById("pg_block_payment_number")),a.a.pgEnableElement(document.getElementById("pg_block_first_payment_part"))}},handlePaymentTypeChange:function(){document.querySelector(r).addEventListener("change",(function(){var t=document.getElementById("pg_field_picture_reset"),n=document.getElementById(i),a=document.getElementById("buttonPreview").querySelector("img");e.setImagePreview(a,n,t)}))},getSelectedPaymentType:function(){return document.querySelector(r).value.toLowerCase()},getButtonDefaultPicture:function(){if(void 0!==default_button_pictures){var e=this.getSelectedPaymentType();return void 0!==default_button_pictures[e]?default_button_pictures[e]:default_button_pictures.default}},useDefaultButtonImage:function(){var e=document.getElementById("pg_field_picture_reset"),t=document.getElementById(i);e.addEventListener("click",(function(n){var a=document.getElementById("pg_block_picture").dataset.previewOriginal;t.value||a||(e.checked=!0)})),e.addEventListener("change",(function(e){t.value=""})),t.addEventListener("change",(function(){e.checked=!1}))},buttonPreview:function(){var t=document.getElementById("pg_field_picture_reset"),n=document.getElementById(i),a=document.getElementById("buttonPreview").querySelector("img");this.setImagePreview(a,n,t),t.addEventListener("change",(function(){e.setImagePreview(a,n,t)})),n.addEventListener("change",(function(){e.setImagePreview(a,n,t)}))},setImagePreview:function(e,t,n){var a=document.getElementById("pg_block_picture"),i=a?a.dataset.previewOriginal:void 0,r=a?this.getButtonDefaultPicture():void 0,l="";t.files&&t.files[0]&&(l=URL.createObjectURL(t.files[0])),n.checked?e.setAttribute("src",r):l?e.setAttribute("src",l):i&&e.setAttribute("src",i)},alertXtimePaymentLegality:function(){var e=document.getElementById("pg_block_payment_mode-XTIME"),t=document.getElementById("pg_field_payment_number"),n=this.getWarningElement(t);this.hideXtimeWarningMessage(n,t.value,e.checked),t.addEventListener("input",function(t){this.hideXtimeWarningMessage(n,t.target.value,e.checked)}.bind(this))},hideXtimeWarningMessage:function(e,t,n){n&&t>4?e.classList.remove("pgform__field__warning--hide"):e.classList.add("pgform__field__warning--hide")},getWarningElement:function(e){return e.closest("fieldset").querySelector(".pgform__field__warning")},pgVerifPaymentTypeText:function(e){document.querySelectorAll('[name="payment_text"]').forEach((function(e){a.a.pgDisableElement(e)}));var t="pg_payment_text_"+e,n=document.getElementById(t);null!==n&&a.a.pgEnableElement(n)}};window.addEventListener("DOMContentLoaded",(function(t){e.install()}))},FH8G:function(e,t,n){"use strict";e={pgDisableElement:function(e){e.classList.contains("js-hidden")||(e.classList.add("js-hidden"),e.querySelectorAll("input, select, textarea").forEach((function(e){e.disabled=!0})))},pgEnableElement:function(e){e.classList.contains("js-hidden")&&(e.classList.remove("js-hidden"),e.querySelectorAll("input, select, textarea").forEach((function(e){e.disabled=!1})))},pgAddBehaviourOnSelect:function(e,t){document.querySelectorAll(e).forEach((function(e){e.addEventListener("change",(function(e){t(e.target.value)})),t(e.value)}))},pgAddBehaviourOnRadio:function(e,t){for(var n=document.querySelectorAll(e),a=null,i=0,r=n.length;i<r;i++)n[i].checked&&(a=n[i].value),n[i].addEventListener("change",(function(e){t(e.target.value)}));t(a)},pgGetRadioValue:function(e){for(var t=document.querySelectorAll(e),n=0,a=t.length;n<a;n++)if(t[n].checked)return t[n].value;return null},pgSetRadioValue:function(e,t){for(var n=document.querySelectorAll(e),a=0,i=n.length;a<i;a++)n[a].value===t&&(n[a].checked=!0)}};t.a=e}});